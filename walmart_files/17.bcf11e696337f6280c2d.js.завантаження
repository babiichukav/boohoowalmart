(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[17],{"+Mar":function(e,t,a){e.exports={root:"qe",root_selected:"re",name:"se",imageWrapper:"te",text:"ue",numVouchers:"ve"}},"5DFG":function(e,t,a){e.exports={root:"vf",icon:"wf"}},fJGp:function(e,t,a){e.exports={root:"Nd",item:"Od",loading:"Pd",results:"Qd",results_loading:"Rd",empty:"Sd",title:"Td",loadingOverlay:"Ud"}},"g/an":function(e,t,a){e.exports={root:"Vf",label:"Wf",icon:"Xf",input:"Yf",clear:"Zf"}},mf6z:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return ee}));var n=a("5CIz"),r=a("d7jh"),c=a("mstN"),o=a("ERkP"),s=a.n(o),i=a("XaAN"),u=a("zQhI"),l=a("IebI"),d=a.n(l),m=a("O+IG"),f=a("1oWz"),v=a("TmcB"),p=function(){return Object(m.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.a.get(v.a.publicTokenRoute,{},!0));case 1:case"end":return e.stop()}}),e)})))()},h=function(e){return Object(m.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",p().then((function(t){var a=f.a.get("".concat(v.a.apiUrlPublic,"/api/search"),{headers:{Authorization:"Bearer ".concat(t)},params:{query:e}});return a.then((function(e){var t={shops:e.shops?e.shops.map((function(e){return{id:e.id,name:e.name,image:e.logo,resource:e.resource,numVouchers:e.numVouchers,searchTerm:e.searchTerm}})):[],products:e.products?e.products.map((function(e){return{id:e.gtin,name:e.name,image:e.imageUrl,resource:e.resource,searchTerm:e.searchTerm}})):[]};return t}))})));case 1:case"end":return t.stop()}}),t)})))()};var b=a("vsDE"),O=a.n(b),j=a("CH9N"),g=a("wHK/"),N=a("O94r"),E=a.n(N),L=a("kz1q"),D=a("7i/4"),w=a("ArUc"),I=s.a.createElement,y=Object(n.a)("path",{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z",fill:"currentColor"});function S(e){return I(w.a,Object(j.a)({viewBox:"0 0 512 512"},e),y)}var C=a("TCpL"),T=a("g/an"),R=a.n(T),k=s.a.createElement,x=Object(n.a)(S,{});function F(e){var t=e.className,a=e.inputRef,r=e.onClearClick,c=e.value,o=Object(g.a)(e,["className","inputRef","onClearClick","value"]),s=Object(L.a)("NavigationSearchInput"),i=s("placeholder");return Object(n.a)("form",{action:s("formAction"),className:E()(t,R.a.root),method:"get"},void 0,Object(n.a)("label",{className:R.a.label},void 0,Object(n.a)(D.a,{className:R.a.icon}),k("input",Object(j.a)({ref:a,"aria-label":i,autoComplete:"off",className:R.a.input,name:"q",placeholder:i,required:!0,spellCheck:!1,type:"search",value:c},o)),c&&c.length>0&&Object(n.a)(C.a,{"aria-label":s("clear"),className:R.a.clear,onClick:r},void 0,x)))}var z=a("XDcN"),M=a("OS1W"),P=a("N8OA"),V=a("5DFG"),U=a.n(V),G=a("Tyym");s.a.createElement;function A(e){var t=e.className,a=e.error;return Object(n.a)(P.a,{className:E()(t,U.a.root)},void 0,Object(n.a)(M.a,{className:U.a.icon}),Object(n.a)(G.a,{error:a}))}var J=a("mZwT"),_=a("fJGp"),q=a.n(_),K=a("pqwd"),W=a("LpLi"),B=a("+Mar"),H=a.n(B),Q=s.a.createElement;function X(e){var t,a=e.className,r=e.isSelected,c=e.onMouseEnter,o=e.onMouseLeave,i=e.result,u=e.unoptimized,l=void 0!==u&&u,d=Object(L.a)("NavigationSearchResultsItem"),m=Object(K.a)().components.NavigationSearchResultsItem;var f=i.name.toLowerCase().indexOf(i.searchTerm.toLowerCase());return t=-1!==f?Q(s.a.Fragment,null,i.name.slice(0,f),Object(n.a)("b",{},void 0,i.name.slice(f,f+i.searchTerm.length)),i.name.slice(f+i.searchTerm.length)):i.name,Object(n.a)("a",{"aria-selected":r,className:E()(a,H.a.root,r&&H.a.root_selected),"data-testid":"NavigationSearchResultsItem",href:i.resource,onMouseDown:function(e){window.location.href=i.resource,e.preventDefault()},onMouseEnter:c,onMouseLeave:o,role:"option"},void 0,Object(n.a)("div",{className:H.a.imageWrapper},void 0,Object(n.a)(W.a,{alt:i.name,height:m.logoHeight,objectFit:"contain",priority:!0,src:i.image,unoptimized:l,width:m.logoWidth})),Object(n.a)("div",{className:H.a.text},void 0,Object(n.a)(P.a,{className:H.a.name,variant:null===m||void 0===m?void 0:m.shopTitleTextVariant},void 0,t),i.numVouchers?Object(n.a)(P.a,{className:H.a.numVouchers,variant:(null===m||void 0===m?void 0:m.numberOfVouchersTextVariant)||"small"},void 0,d("numVouchers",{values:{numVouchers:i.numVouchers}})):""))}s.a.createElement;var Z=Object(n.a)(J.a,{}),Y=Object(n.a)(J.a,{});function $(e){var t=e.className,a=e.fetchPromise,r=e.onSelect,c=e.selectedResultId,o=Object(L.a)("NavigationSearchResults"),s=Object(z.a)(a.state===u.a.FULFILLED?a.result:void 0),i=[];return s&&(s.shops.length>0&&(i.push(Object(n.a)(P.a,{className:q.a.title},"shops-title",o("titleShops"))),i=i.concat(s.shops.map((function(e){return Object(n.a)(X,{className:q.a.item,isSelected:c===e.id,onMouseEnter:function(){return r(e.id)},onMouseLeave:function(){return r(void 0)},result:e},e.id)})))),s.products.length>0&&(i.push(Object(n.a)(P.a,{className:q.a.title},"products-title",o("titleProducts"))),i=i.concat(s.products.map((function(e){return e.image=e.image?e.image:"/next/noimage.png",Object(n.a)(X,{className:q.a.item,isSelected:c===e.id,onMouseEnter:function(){return r(e.id)},onMouseLeave:function(){return r(void 0)},result:e,unoptimized:"/next/noimage.png"!==e.image},e.id)}))))),Object(n.a)("div",{className:E()(t,q.a.root),"data-testid":"NavigationSearchResult"},void 0,a.state===u.a.REJECTED?Object(n.a)(A,{error:a.error}):s?Object(n.a)("div",{className:E()(q.a.results,a.state===u.a.PENDING&&q.a.results_loading)},void 0,i.length>0?i:Object(n.a)(P.a,{className:q.a.empty},void 0,o("empty")),a.state===u.a.PENDING&&Object(n.a)("div",{className:q.a.loadingOverlay},void 0,Y)):Object(n.a)("div",{className:q.a.loading},void 0,Z))}s.a.createElement;function ee(e){var t=e.className,a=e["data-testid"],s=e.isSearchExpanded,l=Object(o.useRef)(null),d=Object(o.useState)(""),m=d[0],f=d[1],v=Object(o.useState)(!1),p=v[0],b=v[1],j=Object(o.useState)(),g=j[0],N=j[1],E=Object(u.b)(),L=Object(c.a)(E,2),D=L[0],w=L[1],I=Object(i.a)(m);Object(o.useLayoutEffect)((function(){if(s){f("");var e=l.current;e&&e.focus()}}),[s]),Object(o.useLayoutEffect)((function(){w(null),I&&w(h(I))}),[I,w]);var y=p&&m.length>0&&null!=I&&I.length>0;return Object(n.a)("div",{className:t,"data-testid":a||"NavigationSearch"},void 0,Object(n.a)(F,{inputRef:l,onBlur:function(){b(!1)},onChange:function(e){var t=e.target.value;f(t),N(void 0)},onClearClick:function(){f(""),w(null);var e=l.current;e&&e.focus()},onFocus:function(){b(!0)},onKeyDown:function(e){if(0!==e.target.value.length)if(e.metaKey||e.shiftKey||e.ctrlKey||e.altKey||D.state!==u.a.FULFILLED||0===D.result.shops.length)"Enter"===e.key&&e.preventDefault();else{var t=D.result.shops,a=D.result.products,n=[].concat(Object(r.a)(t),Object(r.a)(a));if("Enter"===e.key){var c=n.find((function(e){return e.id===g}));if(c)return window.location.href=c.resource,void e.preventDefault()}else if(["ArrowUp","ArrowDown"].includes(e.key)){var o,s=g?n.findIndex((function(e){return e.id===g})):-1;"ArrowUp"===e.key?o=s<=0?n[n.length-1].id:n[s-1].id:"ArrowDown"===e.key&&(o=-1===s?n[0].id:n[(s+1)%n.length].id),N(o),e.preventDefault()}}},value:m}),y&&Object(n.a)($,{className:O.a.results,fetchPromise:D,onSelect:N,selectedResultId:g}))}},vsDE:function(e,t,a){e.exports={results:"qf"}},zQhI:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return c}));var n,r=a("ERkP");function c(){var e=Object(r.useState)(null),t=e[0],a=e[1],c=Object(r.useState)({state:n.IDLE}),o=c[0],s=c[1];return Object(r.useEffect)((function(){var e=!1;return t?(s({state:n.PENDING}),t.then((function(t){e||s({state:n.FULFILLED,result:t})})).catch((function(t){e||s({state:n.REJECTED,error:t})}))):s({state:n.IDLE}),function(){e=!0}}),[t]),[o,a]}!function(e){e.IDLE="IDLE",e.PENDING="PENDING",e.REJECTED="REJECTED",e.FULFILLED="FULFILLED"}(n||(n={}))}}]);